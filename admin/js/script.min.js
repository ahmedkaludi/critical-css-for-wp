function ccfwpGetParamByName(e,c){c||(c=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(c);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}function ccfwpIsEmail(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}function ccfwp_generate_css_cache(e){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ccfwp_generate_css",ccfwp_security_nonce:ccfwp_localize_data.ccfwp_security_nonce},success:function(c){console.log("Cache generation response:",c),"function"==typeof e&&e(c)},error:function(e){console.error("Error during cache generation:",e),alert("Error during cache generation, PLease try again")},dataType:"json"})}function ccfwp_generate_until_complete(e){ccfwp_generate_css_cache((function(c){if(!c||void 0===c.total_pages||void 0===c.cached||void 0===c.failed)return console.error("Invalid or undefined status response:",c),void e.prop("disabled",!1).text("Generate Critical CSS");document.getElementById("ccfwp-queue-count").innerHTML=c.total_pages-(c.cached+c.failed),document.getElementById("ccfwp-cached-count").innerHTML=c.cached,document.getElementById("ccfwp-total-count").innerHTML=c.total_pages,document.querySelector(".ccfwp_progress_bar_body").style.width=c.cached/c.total_pages*100+"%",document.querySelector(".ccfwp_progress_bar_body").innerHTML=c.cached/c.total_pages*100+"%",c.total_pages>c.cached+c.failed?(e.prop("disabled",!0).text("Generating..."+c.cached+"/"+c.total_pages),ccfwp_generate_until_complete(e)):(console.log("Cache generation complete!"),e.prop("disabled",!1).text("Generate Critical CSS"),window.location.reload())}))}jQuery(document).ready((function(e){function c(a,t){var n=t;a.addClass("updating-message"),e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{ccfwp_security_nonce:ccfwp_localize_data.ccfwp_security_nonce,action:"ccfwp_recheck_urls_cache",page:n},success:function(e){a.removeClass("updating-message"),e.status?e.count>0?(n++,c(a,n)):(alert("Recheck is done"),location.reload(!0)):alert("something went wrong")}})}jQuery("#table_page_cc_style_all").DataTable({serverSide:!0,processing:!0,fixedColumns:!0,ajax:{type:"GET",url:ajaxurl+"?action=ccfwp_showdetails_data&ccfwp_security_nonce="+ccfwp_localize_data.ccfwp_security_nonce}}),jQuery("#table_page_cc_style_completed").DataTable({serverSide:!0,processing:!0,fixedColumns:!0,ajax:{type:"GET",url:ajaxurl+"?action=ccfwp_showdetails_data_completed&ccfwp_security_nonce="+ccfwp_localize_data.ccfwp_security_nonce}}),jQuery("#table_page_cc_style_failed").DataTable({serverSide:!0,processing:!0,fixedColumns:!0,ajax:{type:"GET",url:ajaxurl+"?action=ccfwp_showdetails_data_failed&ccfwp_security_nonce="+ccfwp_localize_data.ccfwp_security_nonce}}),jQuery("#table_page_cc_style_queue").DataTable({serverSide:!0,processing:!0,fixedColumns:!0,ajax:{type:"GET",url:ajaxurl+"?action=ccfwp_showdetails_data_queue&ccfwp_security_nonce="+ccfwp_localize_data.ccfwp_security_nonce}}),e(".ccfwp-send-query").on("click",(function(c){c.preventDefault();var a=e("#ccfwp_query_message").val(),t=e("#ccfwp_query_email").val(),n=e("#ccfwp_query_premium_cus").val();e(this).text("Sending..."),e(this).attr("disabled",!0),""!=e.trim(a)&&n&&""!=e.trim(t)&&1==ccfwpIsEmail(t)?e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"ccfwp_send_query_message",premium_cus:n,message:a,email:t,ccfwp_security_nonce:ccfwp_localize_data.ccfwp_security_nonce},success:function(c){"t"==c.status?(e(".ccfwp-query-success").show(),e(".ccfwp-query-error").hide(),e(".ccfwp-send-query").text("Send Message"),e(".ccfwp-send-query").attr("disabled",!1)):(e(".ccfwp-query-success").hide(),e(".ccfwp-query-error").show(),e(".ccfwp-send-query").text("Send Message"),e(".ccfwp-send-query").attr("disabled",!1))},error:function(c){console.log(c),e(".ccfwp-send-query").text("Send Message"),e(".ccfwp-send-query").attr("disabled",!1)}}):(e(".ccfwp-send-query").text("Send Message"),e(".ccfwp-send-query").attr("disabled",!1),""==e.trim(a)&&""==n&&""==e.trim(t)?alert("Please enter the message, email and select customer type"):(""==n&&alert("Select Customer type"),""==e.trim(a)&&alert("Please enter the message"),""==e.trim(t)&&alert("Please enter the email"),0==ccfwpIsEmail(t)&&alert("Please enter a valid email")))})),e(".cwvpb-global-container").hide(),e(".cwvpb-global-container:first").show(),e("#cwvpb-global-tabs a:first").addClass("cwvpb-global-selected"),e("#cwvpb-global-tabs a").click((function(){var c=e(this).attr("data-id");e(this).hasClass("cwvpb-global-selected")||(e("#cwvpb-global-tabs a").removeClass("cwvpb-global-selected"),e(this).addClass("cwvpb-global-selected"),e(".cwvpb-global-container").hide(),e("#"+c).show())})),e(".ccfwp-resend-urls").on("click",(function(c){c.preventDefault();var a=e(this);a.addClass("updating-message"),e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{ccfwp_security_nonce:ccfwp_localize_data.ccfwp_security_nonce,action:"ccfwp_resend_urls_for_cache"},success:function(e){a.removeClass("updating-message"),e.status?location.reload(!0):alert("something went wrong")}})})),e(".ccfwp-advance-toggle").on("click",(function(c){c.preventDefault(),e(".ccfwp-advance-btn-div").toggleClass("cwvpb-display-none")})),e(document).on("click",".cwvpb-resend-single-url",(function(c){c.preventDefault();var a=e(this),t=e(this).attr("data-id"),n=e(this).attr("data-section");a.addClass("cwvpb-display-none"),a.after('<span class="spinner is-active"></span>'),e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{ccfwp_security_nonce:ccfwp_localize_data.ccfwp_security_nonce,action:"ccfwp_resend_single_url_for_cache",url_id:t},success:function(c){a.removeClass("updating-message"),c.status?("all"==n&&(a.parent().parent().parent().find(".cwvpb-status-t").text("queue"),e(a).next("span").remove(),a.remove()),"failed"==n&&a.parent().parent().parent().remove()):(a.removeClass("cwvpb-display-none"),alert("something went wrong"))}})})),e(document).on("click",".cwb-copy-urls-error",(function(c){c.preventDefault();var a=e(this).parent().find(".cwb-copy-urls-text"),t=e("<input>");e("body").append(t),t.val(e(a).val()).select(),document.execCommand("copy"),t.remove(),e("<div>Copied!</div>").insertBefore(e(this)).delay(3e3).fadeOut()})),e(".ccfwp-recheck-url-cache").on("click",(function(a){if(a.preventDefault(),!confirm("It will check all cached urls. if any one has issue will optimize it again. Proceed?"))return!1;c(e(this),0)})),e(".ccfwp-reset-url-cache").on("click",(function(c){if(c.preventDefault(),!confirm("Are you sure? It will start optimize process from beginning again."))return!1;var a=e(this);a.addClass("updating-message"),e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{ccfwp_security_nonce:ccfwp_localize_data.ccfwp_security_nonce,action:"ccfwp_reset_urls_cache"},success:function(e){a.removeClass("updating-message"),console.log(e.status),e.status?location.reload(!0):alert("something went wrong")}})}))})),jQuery(document).on("click",".ccfwp-generate-css",(function(){const e=jQuery(this);e.prop("disabled",!0).text("Generating..."),ccfwp_generate_until_complete(e)}));